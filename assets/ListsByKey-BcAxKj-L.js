import{Q as I,_ as O,a as N,L as k,b as T}from"./List-Dj0fjgCg.js";import{r as y,A as B,k as v,o as m,w as o,f as a,s as j,e as _,N as b,U as Q,t as q,v as H,c as A,b as F,h as J,E as K,j as h,X as S,l as E,$ as U,d as M,R,F as z}from"./index-lkENzVBY.js";import{_ as G}from"./LoadingAbsolute-3Vbcj0Ng.js";import{n as X}from"./Api-DnNOAHI1.js";import{Q as w}from"./QTd-BZuS8eca.js";import{Q as L}from"./QTable-Bf-Ju0hN.js";import{l as P}from"./listsStore-udCb7szH.js";import"./QMarkupTable-BLZXrqV2.js";import"./use-fullscreen-CMxyY4dv.js";const W={__name:"ListsForm",props:{dataInput:{type:Object,required:!0},showInput:{type:Object,required:!0}},emits:["successSubmit","successDelete"],setup(i,{emit:u}){const n=i,r=u,l=y(!1),t=y({});let c=null;const e=n.dataInput?.id;B(()=>{Object.assign(t.value,n.dataInput),c=document.getElementById("btn-close-form")});async function x(){const f=JSON.parse(JSON.stringify(t.value));try{l.value=!0;let s=null;e?s=await k.update(e,f):s=await k.create(f),r("successSubmit",s),c?.click()}catch(s){console.log("error lists ",s)}finally{l.value=!1}}async function d(){if(await X("Hapus data ini?",!0))try{l.value=!0,await k.remove(e),r("successDelete",e),c?.click()}catch(s){console.log("error on delete lists ",s)}finally{l.value=!1}}return(f,s)=>(m(),v(H,{class:"full-width",style:{"max-width":"425px"}},{default:o(()=>[a(I,{onSubmit:j(x,["prevent"])},{default:o(()=>[a(O,{title:"Lists "+t.value.key||"List","is-new":!b(e)},null,8,["title","is-new"]),l.value?(m(),v(G,{key:0,size:"4em"})):_("",!0),a(Q,{class:"q-pa-sm"},{default:o(()=>[n.showInput.val0?(m(),v(q,{key:0,label:"text1",dense:"",class:"",outlined:"",modelValue:t.value.val0,"onUpdate:modelValue":s[0]||(s[0]=g=>t.value.val0=g),autogrow:"",loading:l.value},null,8,["modelValue","loading"])):_("",!0),n.showInput.val1?(m(),v(q,{key:1,label:"text2",dense:"",class:"q-mt-sm",outlined:"",modelValue:t.value.val1,"onUpdate:modelValue":s[1]||(s[1]=g=>t.value.val1=g),autogrow:"",loading:l.value},null,8,["modelValue","loading"])):_("",!0)]),_:1}),a(N,{"btn-delete":!!b(e),onOnDelete:d},null,8,["btn-delete"])]),_:1})]),_:1}))}},$=A({name:"QTr",props:{props:Object,noHover:Boolean},setup(i,{slots:u}){const n=F(()=>"q-tr"+(i.props===void 0||i.props.header===!0?"":" "+i.props.__trClass)+(i.noHover===!0?" q-tr--no-hover":""));return()=>J("tr",{style:i.props?.__trStyle,class:n.value},K(u.default))}}),Y={__name:"ListsStyleSingle",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(i,{emit:u}){const n=u,r=i,l=[{name:"val0",label:"Lists",align:"left",field:t=>`${t.val0}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(t,c)=>(m(),v(L,{rows:r.data,columns:l,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:r.loading},{body:o(e=>[a($,{props:e},{default:o(()=>[a(w,{props:e,key:"val0"},{default:o(()=>[h(S(e.row.val0),1)]),_:2},1032,["props"]),a(w,{props:e,key:"id"},{default:o(()=>[a(E,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"orange-10",onClick:()=>n("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},Z={__name:"ListsStyleDouble",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(i,{emit:u}){const n=u,r=i,l=[{name:"val0",label:"Text 1",align:"left",field:t=>`${t.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:t=>`${t.val1}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(t,c)=>(m(),v(L,{rows:r.data,columns:l,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:r.loading},{body:o(e=>[a($,{props:e},{default:o(()=>[a(w,{props:e,key:"val0"},{default:o(()=>[h(S(e.row.val0),1)]),_:2},1032,["props"]),a(w,{props:e,key:"val1"},{default:o(()=>[h(S(e.row.val1),1)]),_:2},1032,["props"]),a(w,{props:e,key:"id"},{default:o(()=>[a(E,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"orange-10",onClick:()=>n("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ue={__name:"ListsByKey",setup(i){const u=y(!1),{params:n}=U(),r=y(!1),l=y([]),t=y({}),c=y({}),e=P(),{listData:x}=e;B(async()=>{await f()});const d=x.find(({url:p})=>p==n.listKey);async function f(){try{r.value=!0;const p=await k.getByKey(d.url);l.value=p[d.key],e.checkState(d.key)&&e.$patch({[d.key]:p[d.key]})}catch(p){console.log("error get list ",p)}finally{r.value=!1}}function s(){if(d.column==1)return{val0:!0,val1:!1};if(d.column==2)return{val0:!0,val1:!0}}function g(){c.value=s(),t.value={},t.value.key=n.listKey,u.value=!0}function V(p){c.value=s(),t.value=JSON.parse(JSON.stringify(p)),u.value=!0}return(p,C)=>(m(),M(z,null,[a(Q,{class:"bg-orange-7 text-orange-1 text-subtitle1 q-pa-sm flex flex-center"},{default:o(()=>[h(S(b(d)?.label||"List")+" ",1),a(T),a(E,{icon:"add",label:"Baru","no-caps":"",dense:"",class:"q-px-md",outline:"",onClick:g})]),_:1}),a(Q,{class:"q-pa-sm"},{default:o(()=>[b(d).style=="single"?(m(),v(Y,{key:0,data:l.value,loading:r.value,onHandleEdit:V},null,8,["data","loading"])):_("",!0),b(d).style=="double"?(m(),v(Z,{key:1,data:l.value,loading:r.value,onHandleEdit:V},null,8,["data","loading"])):_("",!0)]),_:1}),a(R,{modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=D=>u.value=D)},{default:o(()=>[a(W,{"data-input":t.value,"show-input":c.value,onSuccessDelete:f,onSuccessSubmit:f},null,8,["data-input","show-input"])]),_:1},8,["modelValue"])],64))}};export{ue as default};
