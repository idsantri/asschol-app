import{l as B,Q as k}from"./listsStore-D_O3ITd2.js";import{k as r,o as n,w as c,f as d,aK as w,S as p,e as v,l as y,T as g,m as V,v as Q,aL as R,an as h,r as b,A}from"./index-CVaKkTou.js";import{L as C}from"./List-Doprxmap.js";const x={__name:"DropDownAfter",props:{routeTo:{type:String},disableRoute:{type:Boolean,default:!1},disableReload:{type:Boolean,default:!1}},setup(e){return(o,t)=>(n(),r(Q,{flat:"",bordered:"",class:"bg-transparent"},{default:c(()=>[d(w,{flat:"","dropdown-icon":"more_vert",class:"q-px-sm",color:""},{default:c(()=>[p(d(y,{"no-caps":"",label:"Reload",flat:"",icon:"sync",class:"block",onClick:t[0]||(t[0]=l=>o.$emit("reload")),disable:e.disableReload},null,8,["disable"]),[[g]]),d(V),e.routeTo?p((n(),r(y,{key:0,"no-caps":"",label:"Setting",flat:"",icon:"toc",to:"/settings/lists/"+e.routeTo,class:"block",disable:e.disableRoute},null,8,["to","disable"])),[[g]]):v("",!0)]),_:1})]),_:1}))}},M={__name:"InputSelectArray",props:R({url:{type:String,require:!0},sort:{type:String,default:"asc"},btnSetting:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=h(e,"modelValue"),t=e,l=b(!1),u=b([]),i=B(),s=t.url.replace(/-/g,"_");A(async()=>{const a=i.getStateByKey_Arr(s,t.sort);a.length?u.value=a:(await f(),u.value=i.getStateByKey_Arr(s,t.sort))});async function f(){try{l.value=!0;const a=await C.getByKey(t.url);i.$patch({[s]:a[s]})}catch(a){console.log("error get list ",a)}finally{l.value=!1}}return(a,m)=>(n(),r(k,{dense:"",outlined:"","emit-value":"","map-options":"",options:u.value,loading:l.value,behavior:"menu",clearable:"",modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=S=>o.value=S)},{after:c(()=>[e.btnSetting?(n(),r(x,{key:0,"route-to":e.url,onReload:f},null,8,["route-to"])):v("",!0)]),_:1},8,["options","loading","modelValue"]))}};export{M as _};
