import{r as k,A as U,k as m,o as i,w as d,f as t,s as C,e as w,N as c,U as x,t as p,v as g}from"./index-C6nOKSQr.js";import{Q,_ as S,a as D}from"./List-ZSMSKuby.js";import{_ as N}from"./LoadingAbsolute-xBkflEBl.js";import{_ as $}from"./InputSelectArray-DMdZyW2d.js";import{n as q}from"./Api-2zUcCaGW.js";import{U as f}from"./User-BiJZ5vq6.js";const K={__name:"UserForm",props:{data:{type:Object}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(y,{emit:b}){const v=y,n=b,a=k({}),o=k(!1);let r=null;const l=v.data?.id;U(async()=>{Object.assign(a.value,v.data),r=document.getElementById("btn-close-form")});const V=async()=>{const u={name:a.value.name,username:a.value.username,password:a.value.password,kelompok:a.value.kelompok};try{o.value=!0;let e=null;l?(e=await f.update(l,u),n("successUpdate",e?.user)):(e=await f.create(u),n("successCreate",e?.user)),n("successSubmit",e?.user),r.click()}catch(e){console.log("error user ",e)}finally{o.value=!1}},_=async()=>{if(await q("Hapus data ini?",!0))try{o.value=!0,await f.remove(l),r.click(),n("successDelete",l)}catch(e){console.log("error delete user ",e)}finally{o.value=!1}};return(u,e)=>(i(),m(g,{class:"full-width",style:{"max-width":"425px"}},{default:d(()=>[t(Q,{onSubmit:C(V,["prevent"])},{default:d(()=>[t(S,{title:"Input User","is-new":!c(l)},null,8,["is-new"]),o.value?(i(),m(N,{key:0})):w("",!0),t(x,{class:"q-pa-sm"},{default:d(()=>[t(p,{dense:"",outlined:"",label:"Nama *",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name=s)},null,8,["modelValue"]),t(p,{dense:"",class:"q-my-sm",outlined:"",label:"Username *",modelValue:a.value.username,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.username=s),type:"text",hint:"",rules:[s=>!!s||"Harus diisi!"]},null,8,["modelValue","rules"]),c(l)?w("",!0):(i(),m(p,{key:0,dense:"",outlined:"",label:"Password",modelValue:a.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s)},null,8,["modelValue"])),t($,{modelValue:a.value.kelompok,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.kelompok=s),url:"kelompok-koordinasi",label:"Kelompok Koordinasi",class:"q-my-sm",clearable:""},null,8,["modelValue"])]),_:1}),t(D,{"btn-delete":!!c(l),onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1}))}};export{K as _};
