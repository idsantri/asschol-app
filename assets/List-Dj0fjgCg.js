import{c as $,r as T,az as R,ay as L,A as V,C as j,h as I,E as G,aM as O,a7 as P,aE as H,aN as K,aO as M,aP as U,k as c,o as r,w as d,e as m,f as h,S as _,l as x,n as v,y as C,X as b,T as z,aq as X,aQ as J,L as W,aR as Y,j as w,d as Z,U as ee,aS as te}from"./index-lkENzVBY.js";import{b as ae}from"./listsStore-udCb7szH.js";import{A as oe}from"./LoadingAbsolute-3Vbcj0Ng.js";const fe=$({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:o,emit:l}){const p=j(),n=T(null);let y=0;const f=[];function k(t){const u=typeof t=="boolean"?t:e.noErrorFocus!==!0,S=++y,E=(a,s)=>{l(`validation${a===!0?"Success":"Error"}`,s)},A=a=>{const s=a.validate();return typeof s.then=="function"?s.then(i=>({valid:i,comp:a}),i=>({valid:!1,comp:a,err:i})):Promise.resolve({valid:s,comp:a})};return(e.greedy===!0?Promise.all(f.map(A)).then(a=>a.filter(s=>s.valid!==!0)):f.reduce((a,s)=>a.then(()=>A(s).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return S===y&&E(!0),!0;if(S===y){const{comp:s,err:i}=a[0];if(i!==void 0&&console.error(i),E(!1,s),u===!0){const F=a.find(({comp:N})=>typeof N.focus=="function"&&O(N.$)===!1);F!==void 0&&F.comp.focus()}}return!1})}function q(){y++,f.forEach(t=>{typeof t.resetValidation=="function"&&t.resetValidation()})}function B(t){t!==void 0&&P(t);const u=y+1;k().then(S=>{u===y&&S===!0&&(e.onSubmit!==void 0?l("submit",t):t?.target!==void 0&&typeof t.target.submit=="function"&&t.target.submit())})}function Q(t){t!==void 0&&P(t),l("reset"),H(()=>{q(),e.autofocus===!0&&e.noResetFocus!==!0&&g()})}function g(){K(()=>{if(n.value===null)return;(n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1))?.focus({preventScroll:!0})})}M(U,{bindComponent(t){f.push(t)},unbindComponent(t){const u=f.indexOf(t);u!==-1&&f.splice(u,1)}});let D=!1;return R(()=>{D=!0}),L(()=>{D===!0&&e.autofocus===!0&&g()}),V(()=>{e.autofocus===!0&&g()}),Object.assign(p.proxy,{validate:k,resetValidation:q,submit:B,reset:Q,focus:g,getValidationComponents:()=>f}),()=>I("form",{class:"q-form",ref:n,onSubmit:B,onReset:Q},G(o.default))}}),ne=$({name:"QSpace",setup(){const e=I("div",{class:"q-space"});return()=>e}}),me={__name:"FormActions",props:{btnDelete:{type:Boolean,default:!0},btnClose:{type:Boolean,default:!0},labelDelete:{type:String,default:()=>"Hapus"},labelClose:{type:String,default:()=>"Tutup"},labelSubmit:{type:String,default:()=>"Simpan"},iconSubmit:{type:String,default:()=>"sym_o_save"},iconDelete:{type:String,default:()=>"sym_o_delete"},iconClose:{type:String,default:()=>"sym_o_close"}},setup(e){return(o,l)=>(r(),c(X,{class:"flex items-center bg-orange-6"},{default:d(()=>[e.btnDelete?(r(),c(x,{key:0,color:"negative","no-caps":"",onClick:l[0]||(l[0]=p=>o.$emit("onDelete"))},{default:d(()=>[e.iconDelete?(r(),c(C,{key:0,name:e.iconDelete,class:"q-mr-xs"},null,8,["name"])):m("",!0),v("span",null,b(e.labelDelete),1)]),_:1})):m("",!0),h(ne),e.btnClose?_((r(),c(x,{key:1,color:"warning","no-caps":"",id:"btn-close-form"},{default:d(()=>[e.iconClose?(r(),c(C,{key:0,name:e.iconClose,class:"q-mr-xs"},null,8,["name"])):m("",!0),v("span",null,b(e.labelClose),1)]),_:1})),[[z]]):m("",!0),h(x,{type:"submit",color:"positive","no-caps":""},{default:d(()=>[e.iconSubmit?(r(),c(C,{key:0,name:e.iconSubmit,class:"q-mr-xs"},null,8,["name"])):m("",!0),v("span",null,b(e.labelSubmit),1)]),_:1})]),_:1}))}},se={key:0,class:"text-white"},le={style:{"font-weight":"500 !important"}},ye={__name:"FormHeader",props:{title:{type:String,default:"Input"},isNew:{type:Boolean,default:()=>!0}},setup(e){const o=T(!1),l=()=>te().default?o.value=!0:o.value=!1;return V(()=>{l()}),(p,n)=>(r(),c(ee,{class:"bg-orange-7 text-orange-1 q-pa-sm"},{default:d(()=>[h(J,{class:"q-px-none",style:{"min-height":"0"}},{default:d(()=>[h(Y,{class:"text-subtitle1"},{default:d(()=>[w(b(e.title)+" ",1),o.value?(r(),Z("span",se,[n[0]||(n[0]=w(" — ",-1)),v("em",null,b(e.isNew?"baru":"edit"),1)])):m("",!0)]),_:1}),W(p.$slots,"default"),o.value?m("",!0):(r(),c(ae,{key:0,outline:"",square:"",color:"orange-1","text-color":"white",class:"text-italic text-weight-light no-margin",ripple:!1,icon:e.isNew?"sym_o_new_releases":"sym_o_stylus"},{default:d(()=>[n[1]||(n[1]=w(" input:  ",-1)),v("span",le,b(e.isNew?"baru":"edit"),1)]),_:1},8,["icon"]))]),_:3})]),_:3}))}};class ie extends oe{constructor(o){super(o),this.path="lists"}async getByKey(o){return this.setNotifyGet(),(await this.fetchGuest(`${this.path}/${o}`,{method:"GET"})).data||!0}}const be=new ie;export{be as L,fe as Q,ye as _,me as a,ne as b};
