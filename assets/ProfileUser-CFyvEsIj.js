import{r as f,d as v,o as d,f as a,w as o,j as g,U as _,n as e,s as U,t as y,l as V,F as q,A as B,k as p,v as x,x as N,e as c,X as b,p as C,Q as F,g as L,i as k,Y as $,ao as I,z as M}from"./index-CVaKkTou.js";import{Q as A}from"./QMarkupTable-DWEgKcBk.js";import{U as Q}from"./User-BV3jsdgy.js";import{_ as O}from"./LoadingAbsolute-CgMb_-zQ.js";import{_ as R}from"./CardHeader-DJ1g_Odt.js";import"./Api-gOSdAdwF.js";const T={class:"text-right"},j={__name:"PasswordForm",emits:["loading","success"],setup(S,{emit:n}){const t=f({}),u=n;async function w(){const i=JSON.parse(JSON.stringify(t.value));try{u("loading",!0),await Q.updateMyPassword(i),u("success")}catch(l){console.log("error update password ",l)}finally{u("loading",!1)}}return(i,l)=>(d(),v(q,null,[a(_,{class:"q-pa-sm bg-orange-2"},{default:o(()=>[...l[3]||(l[3]=[g(" Formulir Ganti Password ",-1)])]),_:1}),a(_,{class:"q-pa-sm"},{default:o(()=>[e("form",{onSubmit:U(w,["prevent"])},[a(y,{modelValue:t.value.password_current,"onUpdate:modelValue":l[0]||(l[0]=r=>t.value.password_current=r),class:"q-my-sm",label:"Password Lama",outlined:"",dense:"",type:"password"},null,8,["modelValue"]),a(y,{modelValue:t.value.password,"onUpdate:modelValue":l[1]||(l[1]=r=>t.value.password=r),class:"q-my-sm",label:"Password Baru",outlined:"",dense:"",type:"password"},null,8,["modelValue"]),a(y,{modelValue:t.value.password_confirmation,"onUpdate:modelValue":l[2]||(l[2]=r=>t.value.password_confirmation=r),class:"q-my-sm",label:"Ulangi Password Baru",outlined:"",dense:"",type:"password"},null,8,["modelValue"]),e("div",T,[a(V,{label:"Simpan","no-caps":"",color:"orange",type:"submit"})])],32)]),_:1})],64))}},D={key:0,class:"text-center q-mb-sm"},G={colspan:"2",class:"text-right"},J={class:"fit row wrap justify-start items-start content-start"},W={__name:"ProfileUser",setup(S){const n=f({}),t=f(!1),u=f(!1),w=N();async function i(){try{t.value=!0;const r=await Q.me();n.value=r.user}catch(r){console.log("error get user ",r)}finally{t.value=!1}}B(async()=>{await i()});const l=()=>{u.value=!1,M().logout(),w.replace("/login")};return(r,s)=>(d(),p(x,{class:""},{default:o(()=>[a(R,{onOnReload:i,title:"Profil Saya"}),t.value?(d(),p(O,{key:0})):c("",!0),a(_,{class:"q-pa-sm",style:{"max-width":"600px"}},{default:o(()=>[n.value.must_change_password?(d(),v("div",D,[...s[2]||(s[2]=[e("div",{class:"q-pa-md text-negative bg-red-1",style:{"border-radius":"10px"}},[g(" Anda perlu mengganti password "),e("br"),g("sebelum memulai! ")],-1)])])):c("",!0),a(A,{flat:"",bordered:""},{default:o(()=>[e("tbody",null,[e("tr",null,[s[3]||(s[3]=e("td",{class:"text-italic text-caption"},"Nama",-1)),e("td",null,b(n.value.name),1)]),e("tr",null,[s[4]||(s[4]=e("td",{class:"text-italic text-caption"},"Username",-1)),e("td",null,b(n.value.username),1)]),e("tr",null,[s[5]||(s[5]=e("td",{class:"text-italic text-caption"},"Kelompok Koordinasi",-1)),e("td",null,b(n.value.kelompok),1)]),e("tr",null,[e("td",G,[a(V,{label:"Atur Password",icon:"edit","no-caps":"",dense:"",class:"q-px-sm",color:"orange-7",onClick:s[0]||(s[0]=m=>u.value=!u.value)})])])])]),_:1}),u.value?(d(),p(x,{key:1,flat:"",bordered:"",class:"q-my-sm"},{default:o(()=>[a(j,{onLoading:s[1]||(s[1]=m=>t.value=m),onSuccess:l})]),_:1})):c("",!0),a(C,{bordered:"",separator:"",class:"q-mt-sm"},{default:o(()=>[a(F,{class:"q-pa-sm bg-grey-2"},{default:o(()=>[a(L,null,{default:o(()=>[a(k,{overline:""},{default:o(()=>[...s[6]||(s[6]=[g(" User Group (Role) ",-1)])]),_:1}),n.value?(d(),p(k,{key:0},{default:o(()=>[e("div",J,[(d(!0),v(q,null,$(n.value.roles,(m,P)=>(d(),v("div",{key:P,class:"col-6"},[a(I,{"model-value":m.value,color:"orange",label:m.label,"true-value":!0,"false-value":!1,disable:""},null,8,["model-value","label"])]))),128))])]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{W as default};
