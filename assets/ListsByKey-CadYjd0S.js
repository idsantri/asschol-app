import{Q as j,_ as H,a as A,L as h,b as F}from"./List-CpU3VixI.js";import{r as y,A as L,k as v,o as m,w as i,f as l,s as J,e as g,N as b,U as q,t as I,v as K,c as $,b as D,h as Q,E as B,C as M,j as k,X as S,l as E,$ as U,d as R,R as W,F as z}from"./index-Bs3G2pId.js";import{_ as G}from"./LoadingAbsolute-BmUxo0y7.js";import{n as X}from"./Api-Chd2Imav.js";import{Q as O}from"./QTable-Dt6K70RX.js";import{l as P}from"./listsStore-BSh7pkXC.js";import"./QMarkupTable-Cr3xR5B-.js";import"./use-fullscreen-dc1vE7nJ.js";const Y={__name:"ListsForm",props:{dataInput:{type:Object,required:!0},showInput:{type:Object,required:!0}},emits:["successSubmit","successDelete"],setup(a,{emit:n}){const r=a,s=n,o=y(!1),e=y({});let d=null;const t=r.dataInput?.id;L(()=>{Object.assign(e.value,r.dataInput),d=document.getElementById("btn-close-form")});async function x(){const f=JSON.parse(JSON.stringify(e.value));try{o.value=!0;let u=null;t?u=await h.update(t,f):u=await h.create(f),s("successSubmit",u),d?.click()}catch(u){console.log("error lists ",u)}finally{o.value=!1}}async function c(){if(await X("Hapus data ini?",!0))try{o.value=!0,await h.remove(t),s("successDelete",t),d?.click()}catch(u){console.log("error on delete lists ",u)}finally{o.value=!1}}return(f,u)=>(m(),v(K,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[l(j,{onSubmit:J(x,["prevent"])},{default:i(()=>[l(H,{title:"Lists "+e.value.key||"List","is-new":!b(t)},null,8,["title","is-new"]),o.value?(m(),v(G,{key:0,size:"4em"})):g("",!0),l(q,{class:"q-pa-sm"},{default:i(()=>[r.showInput.val0?(m(),v(I,{key:0,label:"text1",dense:"",class:"",outlined:"",modelValue:e.value.val0,"onUpdate:modelValue":u[0]||(u[0]=_=>e.value.val0=_),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):g("",!0),r.showInput.val1?(m(),v(I,{key:1,label:"text2",dense:"",class:"q-mt-sm",outlined:"",modelValue:e.value.val1,"onUpdate:modelValue":u[1]||(u[1]=_=>e.value.val1=_),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):g("",!0)]),_:1}),l(A,{"btn-delete":!!b(t),onOnDelete:c},null,8,["btn-delete"])]),_:1})]),_:1}))}},w=$({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(a,{slots:n}){const r=M(),s=D(()=>"q-td"+(a.autoWidth===!0?" q-table--col-auto-width":"")+(a.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(a.props===void 0)return Q("td",{class:s.value},B(n.default));const o=r.vnode.key,e=(a.props.colsMap!==void 0?a.props.colsMap[o]:null)||a.props.col;if(e===void 0)return;const{row:d}=a.props;return Q("td",{class:s.value+e.__tdClass(d),style:e.__tdStyle(d)},B(n.default))}}}),N=$({name:"QTr",props:{props:Object,noHover:Boolean},setup(a,{slots:n}){const r=D(()=>"q-tr"+(a.props===void 0||a.props.header===!0?"":" "+a.props.__trClass)+(a.noHover===!0?" q-tr--no-hover":""));return()=>Q("tr",{style:a.props?.__trStyle,class:r.value},B(n.default))}}),Z={__name:"ListsStyleSingle",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(a,{emit:n}){const r=n,s=a,o=[{name:"val0",label:"Lists",align:"left",field:e=>`${e.val0}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(e,d)=>(m(),v(O,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:i(t=>[l(N,{props:t},{default:i(()=>[l(w,{props:t,key:"val0"},{default:i(()=>[k(S(t.row.val0),1)]),_:2},1032,["props"]),l(w,{props:t,key:"id"},{default:i(()=>[l(E,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"orange-10",onClick:()=>r("handleEdit",t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ee={__name:"ListsStyleDouble",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(a,{emit:n}){const r=n,s=a,o=[{name:"val0",label:"Text 1",align:"left",field:e=>`${e.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:e=>`${e.val1}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(e,d)=>(m(),v(O,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:i(t=>[l(N,{props:t},{default:i(()=>[l(w,{props:t,key:"val0"},{default:i(()=>[k(S(t.row.val0),1)]),_:2},1032,["props"]),l(w,{props:t,key:"val1"},{default:i(()=>[k(S(t.row.val1),1)]),_:2},1032,["props"]),l(w,{props:t,key:"id"},{default:i(()=>[l(E,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"orange-10",onClick:()=>r("handleEdit",t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ie={__name:"ListsByKey",setup(a){const n=y(!1),{params:r}=U(),s=y(!1),o=y([]),e=y({}),d=y({}),t=P(),{listData:x}=t;L(async()=>{await f()});const c=x.find(({url:p})=>p==r.listKey);async function f(){try{s.value=!0;const p=await h.getByKey(c.url);o.value=p[c.key],t.checkState(c.key)&&t.$patch({[c.key]:p[c.key]})}catch(p){console.log("error get list ",p)}finally{s.value=!1}}function u(){if(c.column==1)return{val0:!0,val1:!1};if(c.column==2)return{val0:!0,val1:!0}}function _(){d.value=u(),e.value={},e.value.key=r.listKey,n.value=!0}function V(p){d.value=u(),e.value=JSON.parse(JSON.stringify(p)),n.value=!0}return(p,C)=>(m(),R(z,null,[l(q,{class:"bg-orange-7 text-orange-1 text-subtitle1 q-pa-sm flex flex-center"},{default:i(()=>[k(S(b(c)?.label||"List")+" ",1),l(F),l(E,{icon:"add",label:"Baru","no-caps":"",dense:"",class:"q-px-md",outline:"",onClick:_})]),_:1}),l(q,{class:"q-pa-sm"},{default:i(()=>[b(c).style=="single"?(m(),v(Z,{key:0,data:o.value,loading:s.value,onHandleEdit:V},null,8,["data","loading"])):g("",!0),b(c).style=="double"?(m(),v(ee,{key:1,data:o.value,loading:s.value,onHandleEdit:V},null,8,["data","loading"])):g("",!0)]),_:1}),l(W,{modelValue:n.value,"onUpdate:modelValue":C[0]||(C[0]=T=>n.value=T)},{default:i(()=>[l(Y,{"data-input":e.value,"show-input":d.value,onSuccessDelete:f,onSuccessSubmit:f},null,8,["data-input","show-input"])]),_:1},8,["modelValue"])],64))}};export{ie as default};
